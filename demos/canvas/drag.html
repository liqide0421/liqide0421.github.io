<!DOCTYPE html><html lang="en"><head><meta charset="UTF-8"><meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=1,minimum-scale=1,user-scalable=0"><title>Drag</title><style>*{margin:0;padding:0}.canvas{position:fixed;width:100%;height:100%}</style></head><body><canvas class="canvas"></canvas><script src="https://cdn.bootcss.com/jquery/3.3.1/jquery.min.js"></script><script src="https://cdn.bootcss.com/touchjs/0.2.14/touch.min.js"></script><script>var sketch={ratio:null,canvas:null,context:null,isDragging:!1,draggedItem:null,items:[{x:100,y:100,r:50,bR:10,n:5},{x:180,y:180,r:60,bR:20,n:3},{x:200,y:80,r:30,bR:5,n:7},{x:100,y:300,r:40,bR:10,n:6},{x:250,y:320,r:60,bR:10,n:10}],init:function(){var t=this;t.initCanvas(),t.initContext(),t.drawItem(),t.dragAction()},initCanvas:function(){var t=this,n=$(".canvas").get(0),e=n.getContext("2d"),i=window.devicePixelRatio||1;n.width=n.offsetWidth*i,n.height=n.offsetHeight*i,e.scale(i,i),t.ratio=i,t.canvas=n,t.context=e},initContext:function(){var t=this;t.context.lineWidth=2,t.context.fillStyle="mediumslateblue",t.context.strokeStyle="blueviolet"},drawItem:function(t){for(var n=this,e=n.items.length,i=0;i<e;i++){var o=n.items[i];n.drawPolygon(o),t&&n.context.isPointInPath(n.ratio*t.x,n.ratio*t.y)&&(n.isDragging=!0,n.draggedItem=i)}},dragAction:function(){var t=this,n=!1,e=$(t.canvas),i=t.canvas.width,o=t.canvas.height,a=function(e){if(n&&t.isDragging){var a=t.items[t.draggedItem],c={x:e.pageX,y:e.pageY,r:a.r,bR:a.bR,n:a.n};t.items.splice(t.draggedItem,1,c),t.context.clearRect(0,0,i,o),t.drawItem()}},c=function(e){var i={x:e.pageX,y:e.pageY};n=!0,t.drawItem(i)};e.on({mousedown:function(t){c(t)},touchstart:function(t){c(t.originalEvent.touches[0])}}),e.on({mouseup:function(){n=!1,t.isDragging=!1},touchend:function(){n=!1,t.isDragging=!1}}),e.on({mousemove:function(t){a(t)},touchmove:function(t){a(t.originalEvent.touches[0])}})},drawPolygon:function(t){var n=this,e=2*Math.PI/t.n,i=Math.cos(e/2),o=Math.sin(e/2),a=o/i,c=t.bR*o,r=t.r-t.bR*i*Math.pow(a,2),s=-c,g=r;n.context.save(),n.context.translate(t.x,t.y),n.context.beginPath(),n.context.moveTo(c,r);for(var u=0;u<t.n;u++)n.context.quadraticCurveTo(0,t.r,s,g),n.context.rotate(e),n.context.lineTo(c,r);n.context.closePath(),n.context.stroke(),n.context.fill(),n.context.restore()}};sketch.init()</script></body></html>